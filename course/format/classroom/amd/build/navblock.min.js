// This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
/**
 * Load the navigation tree javascript.
 *
 * @module     format_classroom/navblock
 * @package    core
 * @copyright  2015 John Okely <john@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","theme_bootstrapbase/bootstrap","core/tree","core/log"],function($,n,e,o){o.debug("format_classroom/navblock AMD");var i=null,a=null,r=function(n){var e=null;a.length&&(e=a.find('[aria-expanded="true"]'),n.siblings('[role="group"]').collapse("show"),e.each(function(){var e=$(this);e.is(n)||(e.attr("aria-expanded","false"),e.siblings('[role="group"]').attr("aria-hidden","true"),e.siblings('[role="group"]').collapse("hide"))}))};return{init:function(n){o.debug("format_classroom/navblock init - instanceid: "+n);var l=new e('[data-instanceid="'+n+'"] .block_tree');l.finishExpandingGroup=function(n){r(n)},l.collapseGroup=function(n){n.siblings('[role="group"]').collapse("hide")},i=$("#instcnav"),i.length&&(a=i.find(".block_tree"))}}});